{
  "title" : "Minecraft Advancements Schema",
  "description" : "JSON Schema for Advancements in Minecraft JavaEdition",
  "type": "object",
  "definitions": {
    "prop-display": {
      "type": "object",
      "properties": {
        "icon": {
          "type": "object",
          "$ref": "#/definitions/prop-icon"
        },
        "title": {
          "oneOf": [
            {
              "type": "string",
              "description": "plaintext title"
            },
            {
              "type": "object",
              "description": "chat component",
              "$ref" : "#/definitions/chatcomponent"
            }
          ]
        },
        "frame": {
          "type": "string",
          "enum": ["challenge", "goal", "task"]
        },
        "background": {
          "type": "string",
          "pattern": ""
        },
        "description": {
          "oneOf": [
            {
              "type": "string",
              "description": "plaintext title"
            },
            {
              "type": "object",
              "description": "chat component",
              "$ref" : "#/definitions/chatcomponent"
            }
          ]
        },
        "show_toast": {
          "type": "boolean",
          "enum": [true, false],
          "default": true
        },
        "announce_to_chat": {
          "type": "boolean",
          "enum": [true, false],
          "default": true
        },
        "hidden": {
          "type": "boolean",
          "enum": [true, false],
          "default": false
        }
      }
    },
    "prop-icon": {
      "type": "object",
      "properties": {
        "item": {
          "oneOf": [
            {
              "type": "integer",
              "minimum": 0
            },
            {
              "type": "string"
            }
          ]
        }
      }
    },
    "prop-criteria": {
      "type": "object",
      "__comment__": "We don't know what key's name is, so use it",
      "additionalProperties": {
        "type": "object",
        "$ref": "#/definitions/prop-trigger"
      }
    },
    "prop-trigger": {
      "type": "object",
      "properties": {
        "trigger": {
          "type": "string",
          "$ref": "#/definitions/namespace"
        },
        "block": {
          "type": "string",
          "$ref": "#/definitions/namespace"
        }
      }
    },
    "prop-rewards": {
      "type": "object",
      "properties": {
        "recipes": {
          "type": "array",
          "minLength": 1,
          "allOf": [
            {
              "type": "string",
              "$ref": "#/definitions/namespace"
            }
          ]
        },
        "loot": {
          "type": "array",
          "minLength": 1,
          "allOf": [
            {
              "type": "string",
              "$ref": "#/definitions/namespace"
            }
          ]
        },
        "experience": {
          "type": "number"
        },
        "function": {
          "type": "string",
          "$ref": "#/definitions/namespace"
        }
      }
    },
    "chatcomponent": {
      "type": "object",
      "properties": {
        "text": {
          "type": "string"
        }
      }
    },
    "namespace": {
      "type": "string",
      "pattern": "^[a-z\\d_-]+(:([a-z\\d_-]+)?(/[a-z\\d_-]+)*)?(\\.[a-z\\d_-]+)?$"
    }
  },
  "properties": {
    "display": {
      "description": "information about advancement",
      "type": "object",
      "$ref": "#/definitions/prop-display"
    },
    "parent": {
      "description": "base advancements",
      "type": "string",
      "$ref": "#/definitions/namespace"
    },
    "criteria": {
      "description": "conditions for this advancement",
      "type": "object",
      "$ref": "#/definitions/prop-criteria"
    },
    "requirements": {
      "description": "which conditions are required to get the advancement",
      "type": "array",
      "minLength": 1
    },
    "rewards": {
      "description": "reward(s) will be given to player when they met condition defined in criteria",
      "type": "object",
      "$ref": "#/definitions/prop-rewards"
    }
  }
}
